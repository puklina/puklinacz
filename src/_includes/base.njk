<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    {# Meta helpers. #}
    {% set siteName = site.name or site.title or "Puklina" %}
    {% set metaTitle = title or siteName %}
    {% set metaDescription = description or site.description %}
    {% set canonicalUrl = site.url ~ (page.url | url) %}
    {# Resolve OG image #}
    {% if image %}
      {% if image.startsWith('http') %}
        {% set metaImage = image %}
      {% else %}
        {% set metaImage = site.url ~ image %}
      {% endif %}
    {% else %}
      {% set metaImage = site.url ~ "/assets/img/puklina-og-default.jpg" %}
    {% endif %}

    {% set metaImageAlt = imageAlt or metaTitle %}

    <title>{{ metaTitle }}</title>
    <meta name="description" content="{{ metaDescription }}">
    <link rel="canonical" href="{{ canonicalUrl }}"/>

    <meta property="og:locale" content="cs_CZ"/>
    <meta property="og:site_name" content="{{ siteName }}"/>
    <meta property="og:title" content="{{ metaTitle }}"/>
    <meta property="og:description" content="{{ metaDescription }}"/>
    <meta property="og:url" content="{{ canonicalUrl }}"/>
    <meta property="og:type" content="website"/>
    {% if metaImage %}
      <meta property="og:image" content="{{ metaImage }}"/>
      <meta property="og:image:alt" content="{{ metaImageAlt }}"/>
    {% endif %}

    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:title" content="{{ metaTitle }}"/>
    <meta name="twitter:description" content="{{ metaDescription }}"/>
    {% if metaImage %}<meta name="twitter:image" content="{{ metaImage }}"/>{% endif %}

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "{{ siteName }}",
        "url": "{{ site.url }}"
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "{{ siteName }}",
        "url": "{{ site.url }}",
        "logo": "{{ site.logo or (site.url ~ '/assets/logos/favicon-96x96.png') }}"
      }
    </script>
    <meta name="robots" content="index, follow"/>
    <link rel="stylesheet" href="/css/styles.css"/>
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no">
    {# Favicons #}
    <link rel="icon" type="image/png" href="/assets/logos/favicon-96x96.png" sizes="96x96"/>
    <link rel="icon" type="image/svg+xml" href="/assets/logos/favicon.svg"/>
    <link rel="shortcut icon" href="/assets/logos/favicon.ico"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/logos/apple-touch-icon.png"/>
    <meta name="apple-mobile-web-app-title" content="Puklina"/>
    <link rel="manifest" href="/assets/logos/site.webmanifest"/>
  </head>
  <body>
    {{ content | safe }}
    <script>
      if (window.netlifyIdentity) {
        window
          .netlifyIdentity
          .on("init", (user) => {
            if (!user) {
              window
                .netlifyIdentity
                .on("login", () => {
                  document.location.href = "/admin/";
                });
            }
          });
      }
    </script>
    <script src="/script.js"></script>
  </body>
</html>